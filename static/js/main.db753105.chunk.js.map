{"version":3,"sources":["util/github-util.js","App.js","serviceWorker.js","index.js"],"names":["fetchAllLabels","_x","_fetchAllLabels","apply","this","arguments","_callee","options","domain","owner","name","apiKey","after","data","_data$repository$labe","nodes","pageInfo","regenerator_default","a","wrap","_context","prev","next","fetch","concat","method","headers","Authorization","window","btoa","body","JSON","stringify","query","variables","then","response","ok","json","Promise","reject","errors","sent","repository","labels","hasPreviousPage","abrupt","t0","Object","objectSpread","endCursor","t1","call","stop","fetchAllIssues","_x2","_x3","_fetchAllIssues","_callee2","setLoadingPercentage","numIssuesAndPRs","numLoaded","numPagesNeeded","pageNumbers","results","issues","_context2","_ref","totalCount","pullRequests","Math","ceil","toConsumableArray","Array","keys","map","index","all","pageNumber","filter","pull_request","floor","reduce","total","current","issue","title","number","createdAt","created_at","closedAt","closed_at","label","originalLine","Chart","controllers","line","extend","draw","ease","prototype","chart","tooltip","_active","length","activePoint","ctx","x","tooltipPosition","topY","scales","top","bottomY","bottom","save","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","App","state","repoURL","localStorage","getItem","numOpenIssues","chartLabels","selectedLabels","isCheckboxChecked","isLoading","loadingPercentage","errorMessage","handleRepoURLChange","event","_this","setState","target","value","handleApiKeyChange","handleLabelChange","clickedLabel","dataset","includes","handleCheckboxChange","checked","getIssues","matchResults","_matchResults","githubOptions","_ref2","_ref3","labelsObj","timesObj","match","slicedToArray","status","statusText","message","forEach","_ref4","props","objectWithoutProperties","round","time","Date","toDateString","toISOString","times","sort","b","__total","color","chartData","localeCompare","setItem","getChartData","datasets","join","fill","borderColor","lineTension","pointRadius","pointHoverRadius","every","selectedLabel","some","issueLabel","labelToGenerate","renderChartArea","react_default","createElement","className","react","es","legend","display","tooltips","intersect","mode","xAxes","type","tooltipFormat","onChange","chartLabel","key","data-label","onClick","rel","href","placeholder","Component","Boolean","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.db753105.chunk.js","sourcesContent":["/**\n * Recursively fetches a repository's labels\n * @param {object} options Request options\n */\nexport async function fetchAllLabels(options) {\n  const { domain, owner, name, apiKey, after } = options;\n\n  const data = await fetch(`https://api.${domain}/graphql`, {\n    method: 'post',\n    headers: { 'Authorization': `Basic ${window.btoa(apiKey)}` },\n    body: JSON.stringify({\n      query: `query($owner: String!, $name: String!, $after: String) {\n        repository(owner: $owner, name: $name, ) {\n          labels(first: 100, after: $after) {\n            pageInfo {\n              hasNextPage\n              startCursor\n            }\n            nodes {\n              name\n              color\n              issues(states: OPEN) {\n                totalCount\n              }\n            }\n          }\n        }\n      }`,\n      variables: { owner, name, after },\n    }),\n  })\n    .then(response => !response.ok ? Promise.reject(response) : response.json())\n    .then(response => response.errors ? Promise.reject(response.errors) : response.data) // queries can fail\n\n  const { nodes, pageInfo } = data.repository.labels;\n\n  if (!pageInfo.hasPreviousPage) {\n    return nodes;\n  }\n\n  return nodes.concat(await fetchAllLabels({ ...options, after: pageInfo.endCursor }));\n}\n\n/**\n * Fetches all of a repo's issues\n * @param {object} options Request options\n * @param {function} setLoadingPercentage Callback to update loading percentage\n */\nexport async function fetchAllIssues(options, setLoadingPercentage) {\n  const { domain, owner, name, apiKey } = options;\n\n  // Get the total number of issues and PRs\n  // Note: we need to include PRs since GitHub's issues API returns BOTH issues and PRs\n  const numIssuesAndPRs = await fetch(`https://api.${domain}/graphql`, {\n    method: 'post',\n    headers: { 'Authorization': `Basic ${window.btoa(apiKey)}` },\n    body: JSON.stringify({\n      query: `query($owner: String!, $name: String!) {\n        repository(owner: $owner, name: $name, ) {\n          issues {\n            totalCount\n          }\n          pullRequests {\n            totalCount\n          }\n        }\n      }`,\n      variables: { owner, name },\n    }),\n  })\n    .then(response => !response.ok ? Promise.reject(response) : response.json())\n    .then(response => response.errors ? Promise.reject(response.errors) : response.data) // queries can fail\n    .then(({ repository }) => repository.issues.totalCount + repository.pullRequests.totalCount);\n\n  // Send requests in parallel to retrieve all the issues\n  let numLoaded = 0;\n  const numPagesNeeded = Math.ceil(numIssuesAndPRs / 100);\n  const pageNumbers = [...Array(numPagesNeeded).keys()].map(index => index + 1); // [1...numPagesNeeded]\n  const results = await Promise.all(pageNumbers.map(pageNumber => (\n    fetch(`https://api.${domain}/repos/${owner}/${name}/issues?state=all&direction=asc&per_page=100&page=${pageNumber}`, {\n      headers: { 'Authorization': `Basic ${window.btoa(apiKey)}` },\n    })\n      .then(response => !response.ok ? Promise.reject(response) : response.json())\n      .then(response => response.filter(data => !data.pull_request)) // filter out pull requests\n      .then(data => {\n        numLoaded += 1;\n        setLoadingPercentage(Math.floor(numLoaded / numPagesNeeded * 100));\n        return data;\n      })\n  )));\n\n  // Flatten results into a single array\n  const issues = results.reduce((total, current) => total.concat(current));\n\n  // Return only relevant properties\n  return issues.map(issue => ({\n    title: issue.title,\n    number: issue.number,\n    createdAt: issue.created_at,\n    closedAt: issue.closed_at,\n    labels: issue.labels.map(label => label.name),\n  }));\n}\n","import React, { Component, Fragment } from 'react';\nimport { Line, Chart } from 'react-chartjs-2';\nimport { fetchAllLabels, fetchAllIssues } from './util/github-util';\nimport './App.css';\n\n// The vertical line that follows the mouse (https://stackoverflow.com/a/45172506/8917446)\nconst originalLine = Chart.controllers.line;\nChart.controllers.line = Chart.controllers.line.extend({\n  draw: function (ease) {\n    originalLine.prototype.draw.call(this, ease);\n\n    if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\n      var activePoint = this.chart.tooltip._active[0],\n        ctx = this.chart.ctx,\n        x = activePoint.tooltipPosition().x,\n        topY = this.chart.scales['y-axis-0'].top,\n        bottomY = this.chart.scales['y-axis-0'].bottom;\n\n      // draw line\n      ctx.save();\n      ctx.beginPath();\n      ctx.moveTo(x, topY);\n      ctx.lineTo(x, bottomY);\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = '#07C';\n      ctx.stroke();\n      ctx.restore();\n    }\n  }\n});\n\nclass App extends Component {\n  state = {\n    repoURL: window.localStorage.getItem('repo_url') || '',\n    apiKey: window.localStorage.getItem('api_key') || '',\n    numOpenIssues: null,\n    chartLabels: null,\n    selectedLabels: [],\n    isCheckboxChecked: false,\n    isLoading: false,\n    loadingPercentage: 0,\n    errorMessage: null,\n  }\n\n  handleRepoURLChange = event => {\n    this.setState({ repoURL: event.target.value });\n  }\n\n  handleApiKeyChange = event => {\n    this.setState({ apiKey: event.target.value });\n  }\n\n  handleLabelChange = event => {\n    const clickedLabel = event.target.dataset.label;\n    const selectedLabels = this.state.selectedLabels.includes(clickedLabel)\n      ? this.state.selectedLabels.filter(label => label !== clickedLabel)\n      : this.state.selectedLabels.concat(clickedLabel);\n    this.setState({ selectedLabels });\n  }\n\n  handleCheckboxChange = event => {\n    this.setState({ isCheckboxChecked: event.target.checked });\n  }\n\n  getIssues = async () => {\n    this.setState({ isLoading: true, errorMessage: null });\n\n    const matchResults = this.state.repoURL.match(/(github[^/]*)\\/([^/]*)\\/([^/&?]*)/);\n    if (!matchResults) {\n      return this.setState({ errorMessage: 'Could not read URL. Double check the repository URL.' });\n    }\n    const [repoURL, domain, owner, name] = matchResults;\n    const githubOptions = { domain, owner, name, apiKey: this.state.apiKey };\n    try {\n      [this.labels, this.issues] = await Promise.all([\n        fetchAllLabels(githubOptions),\n        fetchAllIssues(githubOptions, loadingPercentage => this.setState({ loadingPercentage })),\n      ]);\n    } catch (e) {\n      let errorMessage = 'Failed to fetch issues';\n      if (e.status && e.statusText) {\n        errorMessage += `: ${e.status} ${e.statusText}. Double check your API key.`;\n      } else if (e[0] && e[0].message) {\n        errorMessage += `: ${e[0].message}`;\n      } else {\n        errorMessage += '. Double check the repo URL and API key.'\n      }\n      return this.setState({ errorMessage });\n    }\n\n    // Convert fetched labels into an object for easier access\n    const labelsObj = {};\n    this.labels.forEach(({ name, ...props }) => { labelsObj[name] = props });\n    this.labels = labelsObj;\n\n    // Get a list of times and count the number of open issues\n    // TODO: think about splitting the logic up? Will it hurt performance?\n    const timesObj = {};\n    let numOpenIssues = 0;\n    this.issues.forEach(issue => {\n      const round = time => new Date(new Date(time).toDateString()).toISOString();\n      timesObj[round(issue.createdAt)] = null;\n      if (issue.closedAt) {\n        timesObj[round(issue.closedAt)] = null;\n      } else {\n        numOpenIssues += 1;\n      }\n    });\n    this.times = Object.keys(timesObj).concat(new Date().toISOString()); // include current time\n    this.times.sort((a, b) => new Date(a) - new Date(b)); // make sure it's in chronological order\n\n    // Mock a \"__total\" label for displaying all the issues\n    this.labels.__total = {\n      color: '0366d6',\n      issues: { totalCount: numOpenIssues },\n    };\n\n    // Finish up\n    this.chartData = {};\n    this.setState({\n      isLoading: false,\n      loadingPercentage: 0,\n      numOpenIssues,\n      repoURL: `https://${repoURL}`,\n      chartLabels: Object.keys(this.labels).sort((a, b) => a.localeCompare(b)),\n      selectedLabels: ['__total'],\n    }, () => {\n      window.localStorage.setItem('repo_url', this.state.repoURL);\n      window.localStorage.setItem('api_key', this.state.apiKey);\n    });\n  }\n\n  getChartData = () => {\n    // If using AND filtering, count all the issues with the selected labels\n    if (this.state.isCheckboxChecked) {\n      return {\n        labels: this.times,\n        datasets: [{\n          label: this.state.selectedLabels.join(', '),\n          fill: false,\n          borderColor: '#0366d6',\n          lineTension: 0,\n          pointRadius: 0,\n          pointHoverRadius: 0,\n          data: !this.state.selectedLabels.length\n            ? []\n            : this.times.map(time => (\n              this.issues.filter(issue => {\n                if (new Date(time) < new Date(issue.createdAt)) {\n                  return false;\n                }\n                if (issue.closedAt && new Date(time) >= new Date(issue.closedAt)) {\n                  return false;\n                }\n                return this.state.selectedLabels.every(selectedLabel => (\n                  issue.labels.some(issueLabel => issueLabel === selectedLabel)\n                ));\n              }).length\n            )),\n        }],\n      };\n    }\n\n    // For each selected label, generate the chart data if didn't already\n    this.state.selectedLabels.filter(label => !this.chartData[label])\n      .forEach(labelToGenerate => {\n        this.chartData[labelToGenerate] = this.times.map(time => (\n          this.issues.filter(issue => {\n            if (new Date(time) < new Date(issue.createdAt)) {\n              return false;\n            }\n            if (issue.closedAt && new Date(time) >= new Date(issue.closedAt)) {\n              return false;\n            }\n            if (labelToGenerate === '__total') {\n              return true;\n            }\n            return issue.labels.some(issueLabel => issueLabel === labelToGenerate);\n          }).length\n        ));\n      });\n\n    return {\n      labels: this.times,\n      datasets: this.state.selectedLabels.map(selectedLabel => ({\n        label: selectedLabel,\n        data: [...this.chartData[selectedLabel]], // don't pass directly or original values will change\n        borderColor: `#${this.labels[selectedLabel].color}`,\n        fill: false,\n        lineTension: 0,\n        pointRadius: 0,\n        pointHoverRadius: 0,\n      })),\n    };\n  }\n\n  renderChartArea = () => {\n    if (!this.state.isLoading && !this.state.chartLabels) {\n      return (\n        <div className=\"status\">\n          <span>Enter your </span>\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/\">GitHub token</a>\n          <span> with the \"repo\" scope to get started.</span>\n        </div>\n      );\n    }\n    if (this.state.isLoading || !this.state.chartLabels) {\n      return <div className=\"status\">Loading...({this.state.loadingPercentage}%)</div>;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"status\">\n          There are {this.state.numOpenIssues} open issues\n        </div>\n        <div className=\"container\">\n          <div className=\"chart\">\n            <Line\n              data={this.getChartData()}\n              options={{\n                legend: {\n                  display: false,\n                },\n                tooltips: {\n                  intersect: false,\n                  mode: 'index',\n                },\n                scales: {\n                  xAxes: [{\n                    type: 'time',\n                    time: {\n                      tooltipFormat: 'll', // https://momentjs.com/\n                    },\n                  }],\n                }\n              }}\n            />\n          </div>\n          <div className=\"labels\">\n            <h2>Labels</h2>\n            <input\n              type=\"checkbox\"\n              checked={this.state.isCheckboxChecked}\n              onChange={this.handleCheckboxChange}\n            />Use AND Filter\n            {this.state.chartLabels.map(chartLabel => (\n              <div\n                className={`label ${this.state.selectedLabels.includes(chartLabel) ? 'selected' : ''}`}\n                key={chartLabel}\n                data-label={chartLabel}\n                onClick={this.handleLabelChange}\n              >\n                {chartLabel} ({this.labels[chartLabel].issues.totalCount})\n              </div>\n            ))}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"repo-info\">\n          <input\n            value={this.state.repoURL}\n            onChange={this.handleRepoURLChange}\n            placeholder=\"Repo URL\"\n          />\n          <input\n            type=\"password\"\n            value={this.state.apiKey}\n            onChange={this.handleApiKeyChange}\n            placeholder=\"API Key\"\n          />\n          <button onClick={this.getIssues}>Submit</button>\n        </div>\n        {this.state.errorMessage\n          ? <div className=\"error\">{this.state.errorMessage}</div>\n          : this.renderChartArea()}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}